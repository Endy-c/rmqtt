[package]
name = "rmqttd"
version = "0.1.2"
authors = ["rmqtt <rmqttd@126.com>"]
edition = "2018"
build = "build.rs"

[[bin]]
name = "rmqttd"
path = "src/server.rs"

[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3

[dependencies]
futures = "0.3.13"
ntex = { version = "0.3", features = ["rustls"] }
ntex-mqtt = { git = "https://github.com/rmqtt-rs/ntex-mqtt", version = "0.6.8"}
rustls = "0.19"
tokio = { version = "1.4" , default-features=false}
anyhow = "1"
log = "0.4"
serde = { version = "1.0.104", features = ["derive"] }
serde_json = "1.0.48"
warp = "0.3"

##plugins-release
rmqtt = { git = "https://github.com/rmqtt-rs/rmqtt.git", version="0.1.3"}
rmqtt-plugin-template = { git = "https://github.com/rmqtt-rs/rmqtt.git", version="0.1.1"}
rmqtt-web-hook = { git = "https://github.com/rmqtt-rs/rmqtt.git", version="0.1.1"}
rmqtt-auth-http = { path = "../rmqtt-plugins/rmqtt-auth-http", version="0.1.1"}

##plugins-dev
#rmqtt = { path = "../rmqtt" }
#rmqtt-plugin-template = { path = "../rmqtt-plugins/rmqtt-plugin-template" }
#rmqtt-web-hook = { path = "../rmqtt-plugins/rmqtt-web-hook" }
#rmqtt-auth-http = { path = "../rmqtt-plugins/rmqtt-auth-http" }

[package.metadata.plugins]
rmqtt-plugin-template = {}
rmqtt-web-hook = {}
rmqtt-auth-http = {}
#rmqtt-auth-http = {default_startup = true}

[build-dependencies]
toml = "0.5"
chrono = "0.4.15"

